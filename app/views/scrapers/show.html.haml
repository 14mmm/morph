%h1
  = link_to @scraper.owner.to_param, @scraper.owner
  \/
  = link_to @scraper.name, @scraper

%h4= @scraper.description

%p This is where all the information for this scraper and the resulting data will be shown

%p There will be a table with the data, a big button to run the scraper and stuff like that.

= link_to "Go to GitHub", @scraper.github_url

- if @scraper.owned_by?(current_user)
  = button_to "Run it!", run_scraper_path(@scraper), class: "btn btn-info"

- if @rows
  %h2 Data
  = link_to "Download table (as CSV)", scraper_data_path(@scraper, :format => :csv)
  %p (First 10 rows)
  .table-responsive
    %table.table.table-striped.table-bordered.table-condensed.scraper-data
      - unless @rows.empty?
        %tr
          - @rows.first.each_key do |field|
            %th= field
      - @rows.each do |row|
        %tr
          - row.each_value do |v|
            %td= v

- if @scraper.owned_by?(current_user)
  %h2 Here be dragons!

  = button_to "Delete scraper", @scraper, {method: :delete, class: "btn btn-danger", confirm: "Delete #{@scraper.full_name}?"}
  %p This can't be undone  