.row
  .col-md-3
    = image_tag @owner.gravatar_url, class: "img-responsive img-thumbnail"
    %h1= @owner.name
    %h2= @owner.nickname
    %ul.list-unstyled
      - unless @owner.company.blank?
        %li= @owner.company
      - unless @owner.blog.blank?
        %li= link_to @owner.blog, @owner.blog
    %p
      = link_to @owner.github_url, target: "_blank" do
        %i.icon-github-sign.icon-large
        = @owner.nickname
        on GitHub
    - unless @owner.organizations.empty?
      %h4 Organizations
      %p
        - @owner.organizations.each do |org|
          = link_to org do
            = image_tag org.gravatar_url(30), size: "30x30"
    - unless @owner.users.empty?
      %h4 Members
      %p
        - @owner.users.each do |user|
          = link_to user do
            = image_tag user.gravatar_url(30), size: "30x30"
    - if @owner == current_user
      %div
        = link_to "Show your key", user_settings_path, class: "btn btn-default"

  .col-md-8
    - if @owner.user?
      %p
        - if @owner.alerts.empty?
          - if @owner == current_user
            You are watching no scrapers
          - else
            = @owner.nickname
            is watching no scrapers
        - else
          - if @owner == current_user
            = link_to "Scrapers you are watching", user_watching_path(@owner)
          - else
            = link_to "Scrapers #{@owner.nickname} is watching", user_watching_path(@owner)

    - if @owner.scrapers.empty?
      %h3 Has no scrapers

    - else
      %h3 Scrapers
      - if @owner.scrapers.any?{|s| s.requires_attention?}
        .list-group= render @owner.scrapers.select{|s| s.requires_attention?}
      .list-group= render @owner.scrapers.select{|s| !s.requires_attention?}

    - if @owner == current_user
      %p= link_to "Add scraper", new_scraper_path, class: "btn btn-default"

    - unless @owner.scrapers.empty?
      %h3 Statistics
      %p
        Total run time:
        = "%.1f s" % @owner.runs.sum(&:wall_time)  
      %p
        Total cpu time used:
        = "%.1f s" % @owner.scrapers.sum(&:cpu_time)
      %p
        Total disk space used:
        = number_to_human_size @owner.scrapers.sum(&:total_disk_usage)

  .col-md-1
    - if signed_in?
      = render partial: "watch_button", locals: {owner: @owner}

