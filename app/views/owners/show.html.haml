- content_for :title, @owner.nickname
.row
  .col-md-11
    %h1= @owner.nickname
    %h4= @owner.name
  .col-md-1
    - if signed_in?
      .button_title_adjust= render partial: "watch_button", locals: {owner: @owner}
%hr
.row
  .col-md-3
    = image_tag @owner.gravatar_url, class: "img-responsive img-thumbnail"
    %ul.list-unstyled
      - unless @owner.company.blank?
        %li= @owner.company
      - unless @owner.blog.blank?
        %li= link_to @owner.blog, @owner.blog
    %p
      = link_to @owner.github_url, target: "_blank" do
        %i.icon-github-sign.icon-large
        = @owner.nickname
        on GitHub
    - unless @owner.organizations.empty?
      %h4 Organizations
      %p
        - @owner.organizations.each do |org|
          = link_to org do
            = image_tag org.gravatar_url(30), size: "30x30"
    - unless @owner.users.empty?
      %h4 Members
      %p
        - @owner.users.each do |user|
          = link_to user do
            = image_tag user.gravatar_url(30), size: "30x30"
    - if @owner == current_user
      %div
        = link_to "Show your key", user_settings_path, class: "btn btn-default"
    %hr
    - unless @owner.scrapers.empty?
      %h3 Statistics
      %p
        Total run time:
        = duration_of_time_in_words(@owner.runs.sum(&:wall_time))
      %p
        Total cpu time used:
        = duration_of_time_in_words(@owner.scrapers.sum(&:cpu_time))
      %p
        Total disk space used:
        = number_to_human_size @owner.scrapers.sum(&:total_disk_usage)

  .col-md-9
    - if @owner.user?
      %p
        - if @owner.alerts.empty?
          watching no scrapers
        - else
          = link_to "watching #{pluralize(@owner.all_scrapers_watched.count, 'scrapers')}", user_watching_path(@owner)

    - if @owner.scrapers.empty?
      %h3 Has no scrapers

    - else
      - scrapers = @owner.scrapers
      %h3= pluralize(scrapers.count, "scraper")
      .list-group= render scrapers.select{|s| s.running?}
      .list-group= render scrapers.select{|s| s.requires_attention?}
      .list-group= render scrapers.select{|s| !s.requires_attention? && !s.running?}.sort{|a,b| b.updated_at <=> a.updated_at}

    - if @owner == current_user
      %p= link_to "Add scraper", new_scraper_path, class: "btn btn-default"


  .col-md-1

